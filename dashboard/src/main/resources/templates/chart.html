<!DOCTYPE html>
<html>
<head xmlns:th="http://www.thymeleaf.org">
<meta charset="EUC-KR">
<link rel="stylesheet" type="text/css" th:href="@{/css/dashboard.css}">
<script src="https://cdn.jsdelivr.net/gh/emn178/chartjs-plugin-labels/src/chartjs-plugin-labels.js"></script>
<title>Insert title here</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
</head>


	<header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
	  <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3 fs-6" href="#">Company name</a>
	  <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
	    <span class="navbar-toggler-icon"></span>
	  </button>
	  <div class="navbar-nav">
	    <div class="nav-item text-nowrap">
	      <a class="nav-link px-3" href="#">Sign out</a>
	    </div>
	  </div>
	</header>
	

<body>
	<div class="container-fluid">
  <div class="row">
    <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
      <div class="position-sticky pt-3 sidebar-sticky">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home align-text-bottom" aria-hidden="true"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
              Dashboard
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4"><div class="chartjs-size-monitor"><div class="chartjs-size-monitor-expand"><div class=""></div></div><div class="chartjs-size-monitor-shrink"><div class=""></div></div></div>
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Dashboard</h1>
        <div class="btn-toolbar mb-2 mb-md-0">
          <div class="btn-group me-2">
            <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
            <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
          </div>
          <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar align-text-bottom" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
            This week
          </button>
        </div>
      </div>

      <canvas class="my-4 w-100 chartjs-render-monitor" id="myChart" width="820" height="345" style="display: block; height: 276px; width: 656px;"></canvas>
      <br>
      <hr>
      <br>
      
      <canvas class="my-4 w-100 chartjs-render-monitor" id="pieChart" width="820" height="345" style="display: block; height: 276px; width: 656px;"></canvas>
	  
      
    </main>
  </div>
</div>
<div style="display:none" >
<table>
	<tr th:each="row:${datas}">
		<td class="data" th:text="${row.sum}"></td>
	</tr>
</table>
</div>
<div style="display:none" >
<table>
	<tr th:each="row:${datas_pie}">
		<td class="data_pie_sum" th:text="${row.sum}"></td>
	</tr>
</table>
</div>
<div style="display:none" >
<table>
	<tr th:each="row:${datas_pie}">
		<td class="data_pie_category_name" th:text="${row.categoryIdKor}"></td>
	</tr>
</table>
</div>

</body>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js" integrity="sha384-uO3SXW5IuS1ZpFPKugNNWqTZRRglnUJK6UAZ/gxOX80nxEkN9NcGZTftn6RzhGWE" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js" integrity="sha384-zNy6FEbO50N+Cg5wap8IKA4M/ZnLJgzc6w2NqACZaK0u0FXfOWRRJOnQtpZun8ha" crossorigin="anonymous"></script>

<script>
var data_list=[]
$(".data").each(function(index,obj){
	data_list[index]=$(obj).text()*1
	})
console.log(data_list)
const labels = [
    '1',
    '2',
    '3',
    '4',
    '5',
    '6',
    '7',
    '8',
    '9',
    '10',
    '11',
    '12',
  ];
const data = {
	    labels: labels,
	    datasets: [{
	      label: 'monthly sales',
	      backgroundColor: 'rgb(255, 99, 132)',
	      borderColor: 'rgb(255, 99, 132)',
	      data: data_list,
	      fill: false,
	      tension: 0.2
	    }]
	  };

const config = {
		  type: 'line',
		  data: data,
		  options: {
		    responsive: true,
		    
		    plugins: {
		      title: {
		        display: true,
		        text: 'Chart.js Line Chart - Cubic interpolation mode'
		      },
		    },
		    interaction: {
		      intersect: false,
		    },
		    scales: {
		      x: {
		        display: true,
		        title: {
		          display: true
		        }
		      },
		      y: {
		        display: true,
		        title: {
		          display: true,
		          text: 'Value'
		        },
		        suggestedMin: -10,
		        suggestedMax: 200
		      }
		    }
		  },
		};
const myChart = new Chart(
	    document.getElementById('myChart'),
	    config
	  );

var data_pie_sum=[]
$(".data_pie_sum").each(function(index,obj){
	data_pie_sum[index]=$(obj).text()*1
})
var data_pie_category_name=[]
$(".data_pie_category_name").each(function(index,obj){
	data_pie_category_name[index]=$(obj).text();
})
	
var dataset = {
	    label: "육류 판매량",
	    backgroundColor: ['#ffd950', '#02bc77', '#28c3d7', '#FF6384'],//라벨별 컬러설정
	    borderColor: '#22252B',
	    data: data_pie_sum
	}

var labels_pie=data_pie_category_name; 
	  
var datasets={ datasets:[dataset], labels:labels_pie }

var config_pie = {
	    type: 'pie',
	    data: datasets, //데이터 셋 
	    options: {
	        responsive: true,
	        maintainAspectRatio: true, //true 하게 되면 캔버스 width,height에 따라 리사이징된다.
	        legend: {
	            position: 'top',
	            fontColor: 'black',
	            align: 'center',
	            display: true,
	            fullWidth: true,
	            labels: {
	                fontColor: 'rgb(0, 0, 0)'
	            }
	        },
	        plugins: {
	            labels: {//두번째 script태그를 설정하면 각 항목에다가 원하는 데이터 라벨링을 할 수 있다.
	                render: 'value',
	                fontColor: 'black',
	                fontSize: 15,
	                precision: 2
	            }

	        }
	    }
	}
var canvas=document.getElementById('pieChart');
var pieChart = new Chart(canvas,config_pie);
</script>
</html>